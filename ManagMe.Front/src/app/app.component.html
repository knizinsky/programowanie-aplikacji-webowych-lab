@if (!isLoggedIn) {
<app-login-form (loggedIn)="handleLogin()"></app-login-form>
} @else {
<mat-toolbar color="primary">
  <span>ManagMe</span>
  <span class="spacer"></span>
  <button
    mat-icon-button
    (click)="toggleTheme()"
    [matTooltip]="'Przełącz tryb ciemny/jasny'"
  >
    <mat-icon>{{ isDarkTheme ? "light_mode" : "dark_mode" }}</mat-icon>
  </button>
</mat-toolbar>

<mat-tab-group>
  <mat-tab label="Projekty">
    <h2>Lista Projektów</h2>
    <div style="display: flex; justify-content: center; margin: 16px">
      <button mat-flat-button color="primary" (click)="openProjectDialog()">
        Dodaj projekt
      </button>
    </div>
    <app-project-list
      (editRequested)="openProjectDialog($event)"
    ></app-project-list>
  </mat-tab>
  <mat-tab label="Historyjki">
    <div class="story-list-header">
      <h2>Lista Historyjek</h2>
      <button mat-flat-button color="primary" (click)="openStoryDialog()">
        Dodaj historyjkę
      </button>
    </div>

    <app-story-list (editRequested)="openStoryDialog($event)"></app-story-list>
  </mat-tab>
  <mat-tab label="Zadania">
    <h2>Lista zadań</h2>
    <div style="display: flex; justify-content: center; margin: 0 0 16px">
      <button mat-flat-button color="primary" (click)="openTaskDialog()">
        Dodaj zadanie
      </button>
    </div>

    <app-kanban-board
      (editRequested)="openTaskDialog($event)"
    ></app-kanban-board>
  </mat-tab>
  <mat-tab label="Użytkownicy">
    <app-user-list (onLogout)="logout()"></app-user-list>
  </mat-tab>
</mat-tab-group>
}
